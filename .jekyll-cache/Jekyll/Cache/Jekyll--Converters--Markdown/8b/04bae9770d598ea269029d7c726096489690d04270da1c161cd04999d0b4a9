I"c<h1 id="development-guide">Development Guide</h1>

<h2 id="building-kompose">Building Kompose</h2>

<p>Read about building kompose <a href="https://github.com/kubernetes/kompose#building">here</a>.</p>

<h2 id="workflow">Workflow</h2>
<h3 id="fork-the-main-repository">Fork the main repository</h3>

<ol>
  <li>Go to https://github.com/kubernetes/kompose</li>
  <li>Click the “Fork” button (at the top right)</li>
</ol>

<h3 id="clone-your-fork">Clone your fork</h3>

<p>The commands below require that you have $GOPATH. We highly recommended you put Kompose’ code into your $GOPATH.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">git clone https://github.com/$</span>YOUR_GITHUB_USERNAME/kompose.git <span class="nv">$GOPATH</span>/src/github.com/kubernetes/kompose
<span class="gp">cd $</span>GOPATH/src/github.com/kubernetes/kompose
<span class="go">git remote add upstream 'https://github.com/kubernetes/kompose'
</span></code></pre></div></div>

<h3 id="create-a-branch-and-make-changes">Create a branch and make changes</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git checkout -b myfeature
</span><span class="gp">#</span><span class="w"> </span>Make your code changes
</code></pre></div></div>

<h3 id="keeping-your-development-fork-in-sync">Keeping your development fork in sync</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git fetch upstream
git rebase upstream/master
</span></code></pre></div></div>

<p>Note: If you have write access to the main repository at github.com/kubernetes/kompose, you should modify your git configuration so that you can’t accidentally push to upstream:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git remote set-url --push upstream no_push
</span></code></pre></div></div>

<h3 id="committing-changes-to-your-fork">Committing changes to your fork</h3>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git commit
git push -f origin myfeature
</span></code></pre></div></div>

<h3 id="creating-a-pull-request">Creating a pull request</h3>

<ol>
  <li>Visit https://github.com/$YOUR_GITHUB_USERNAME/kompose.git</li>
  <li>Click the “Compare and pull request” button next to your “myfeature” branch.</li>
  <li>Check out the pull request process for more details</li>
</ol>

<h2 id="go-modules-and-dependency-management">Go Modules and dependency management</h2>

<p>Kompose uses <a href="https://github.com/golang/go/wiki/Modules">Go Modules</a> to manage dependencies.
If you want to make changes to dependencies please make sure that <code class="highlighter-rouge">go.mod</code> and <code class="highlighter-rouge">go.sum</code> are updated properly.</p>

<h5 id="updating-kubernetes-and-openshift">Updating Kubernetes and OpenShift</h5>
<p>Kubernetes version depends on what version is OpenShift using.
OpenShift is using forked Kubernetes to carry some patches.
Currently it is not possible to use different Kubernetes version from version that OpenShift uses.
(for more see comments in <code class="highlighter-rouge">go.mod</code>)</p>

<h3 id="adding-cli-tests">Adding CLI tests</h3>

<p><a href="https://github.com/kubernetes/kompose/tree/master/script/test/cmd">Kompose CLI tests</a> run <code class="highlighter-rouge">kompose convert</code> with docker-compose files, and cross-check the k8s and OpenShift artifacts generated with the template files.</p>

<p>To generate CLI tests, please run <code class="highlighter-rouge">make gen-cmd</code>.</p>

<h3 id="ci">CI</h3>

<p>For Kompose, we use numerous CI’s:</p>

<ul>
  <li><a href="https://travis-ci.org/kubernetes/kompose">TravisCI</a>: Unit and CLI tests</li>
  <li><a href="https://semaphoreci.com/cdrage/kompose-2">SemaphoreCI</a>: Integration / cluster tests</li>
  <li><a href="http://jenkins.cd.k8s.fabric8.io/">Fabric8CI</a>: Secondary integration tests / future cluster tests</li>
</ul>
:ET